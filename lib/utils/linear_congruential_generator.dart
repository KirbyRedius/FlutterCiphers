class LinearCongruentialGenerator {
  static String solve(
      {required int a, required int c, required int m, required int x0}) {
    // переменная для хранения длины периода (количество чисел в периоде)
    int periodLength = 0;

    //переменные для подсчета четных и нечетных чисел
    int evenCount = 0; // количество четных чисел
    int oddCount = 0; // количество нечетных чисел

    // переменные для подсчета нулей и единиц в битовом представлении
    int zeroCount = 0; // количество нулей
    int oneCount = 0; // количество единиц

    // текущее значение последовательности, начинается с x0
    int currentX = x0;

    // флаг для определения, найден ли период
    bool periodFound = false;

    // запоминаем начальное значение для проверки завершения периода
    int firstX = x0;

    // основной цикл для генерации последовательности
    while (!periodFound) {
      // генерация следующего числа по формуле ЛКГ: x(n+1) = (a * x(n) + c) mod m
      currentX = (a * currentX + c) % m;

      // проверка, является ли текущее число четным или нечетным
      if (currentX % 2 == 0) {
        evenCount++; // увеличиваем счетчик четных чисел
      } else {
        oddCount++; // увеличиваем счетчик нечетных чисел
      }

      // переводим текущее число в двоичное представление (битовую строку)
      String binary = currentX.toRadixString(2);

      // проходим по каждому биту в двоичной строке
      for (int i = 0; i < binary.length; i++) {
        if (binary[i] == '0') {
          zeroCount++; // увеличиваем счетчик нулей
        } else {
          oneCount++; // увеличиваем счетчик единиц
        }
      }

      // проверяем, совпадает ли текущее число с начальным значением
      if (currentX == firstX) {
        periodFound = true; // период завершен
      }

      // увеличиваем длину периода на 1
      periodLength++;
    }

    // формируем строку с результатами
    String result = """
    Параметры генератора: a = $a, c = $c, m = $m, x0 = $x0
    Длина периода: $periodLength чисел
    Количество четных чисел: $evenCount
    Количество нечетных чисел: $oddCount
    Количество нулей в битовом представлении: $zeroCount
    Количество единиц в битовом представлении: $oneCount
    """;

    // возвращаем строку с результатами
    return result;
  }
}
